---
import '../styles/global.css';

const { title, description, canonical, ogType = 'website', schema } = Astro.props;
const siteUrl = 'https://myspeedtest.isnowfriend.com';
const ogImage = siteUrl + '/og-image.jpg';
---

<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{title}</title>
  <meta name="description" content={description}>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš¡</text></svg>">

  <!-- Canonical -->
  <link rel="canonical" href={canonical}>

  <!-- Open Graph -->
  <meta property="og:type" content={ogType}>
  <meta property="og:locale" content="zh_TW">
  <meta property="og:site_name" content="MST æ¸¬é€Ÿ">
  <meta property="og:title" content={title}>
  <meta property="og:description" content={description}>
  <meta property="og:url" content={canonical}>
  <meta property="og:image" content={ogImage}>
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content={title}>
  <meta name="twitter:description" content={description}>
  <meta name="twitter:image" content={ogImage}>

  <!-- çµæ§‹åŒ–è³‡æ–™ -->
  {schema && (
    <script type="application/ld+json" set:html={JSON.stringify(schema)} />
  )}
</head>
<body>
  <header class="doc-header">
    <a href="/" class="logo">
      <div class="logo-icon"></div>
      MST
    </a>
    <div class="nav-right">
      <nav>
        <a href="/learn">åŸç†</a>
        <a href="/sdk">SDK</a>
        <a href="/api">API</a>
        <a href="/blog">éƒ¨è½æ ¼</a>
      </nav>
      <button class="theme-toggle" id="themeToggle" title="åˆ‡æ›æ·±æ·ºæ¨¡å¼">
        <span id="themeIcon">ğŸŒ™</span>
      </button>
    </div>
  </header>

  <slot />

  <footer>
    <p>
      <a href="/learn">æ¸¬é€ŸåŸç†</a>
      <a href="/sdk">é–‹ç™¼è€… SDK</a>
      <a href="/blog">éƒ¨è½æ ¼</a>
    </p>
    <p style="margin-top: 15px;">&copy; 2025 MySpeedTest</p>
  </footer>

  <script is:inline>
    function toggleTheme() {
      var html = document.documentElement;
      var icon = document.getElementById('themeIcon');
      var isDark = html.getAttribute('data-theme') === 'dark';

      if (isDark) {
        html.removeAttribute('data-theme');
        if (icon) icon.textContent = 'ğŸŒ™';
        localStorage.setItem('theme', 'light');
      } else {
        html.setAttribute('data-theme', 'dark');
        if (icon) icon.textContent = 'â˜€ï¸';
        localStorage.setItem('theme', 'dark');
      }
    }

    var saved = localStorage.getItem('theme');
    if (saved === 'dark') {
      document.documentElement.setAttribute('data-theme', 'dark');
      var icon = document.getElementById('themeIcon');
      if (icon) icon.textContent = 'â˜€ï¸';
    }

    var toggleBtn = document.getElementById('themeToggle');
    if (toggleBtn) toggleBtn.addEventListener('click', toggleTheme);
  </script>
</body>
</html>
